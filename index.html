// FILE: index.html
<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5">
Â  Â  <meta name="description" content="Book your time slots easily and manage your bookings online">
Â  Â  <meta name="theme-color" content="#10b981">
Â  Â  <meta name="apple-mobile-web-app-capable" content="yes">
Â  Â  <meta name="apple-mobile-web-app-status-bar-style" content="default">
Â  Â Â 
Â  Â  Â  Â  <meta http-equiv="Content-Security-Policy"Â 
// UPDATED: Added img-src directive to allow Data URIs for inline SVGs (Data:image/svg+xml)
Â  Â  Â  Â  Â  content="default-src 'self';Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â font-src 'self' https://fonts.gstatic.com;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â script-src 'self' 'unsafe-inline';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â connect-src 'self';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â img-src 'self' data:;">
Â  Â Â 
Â  Â  <title>Book a Slot - Online Booking System</title>

Â  Â  Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â Â 
Â  Â  Â  Â  <link rel="preload"Â 
Â  Â  Â  Â  Â  href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"Â 
Â  Â  Â  Â  Â  as="style"Â 
Â  Â  Â  Â  Â  onload="this.onload=null;this.rel='stylesheet'">
Â  Â  <noscript>
Â  Â  Â  Â  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
Â  Â  </noscript>

Â  Â  <link rel="stylesheet" href="user-style.css">
Â  Â  <link rel="icon" href="/favicon.ico" type="image/x-icon">
Â  Â  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

Â  Â  Â  Â  <style>
Â  Â  Â  Â  body {Â 
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Inter', 'Segoe UI', sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  background: #f8fafc;
Â  Â  Â  Â  Â  Â  line-height: 1.5;
Â  Â  Â  Â  Â  Â  -webkit-font-smoothing: antialiased;
Â  Â  Â  Â  Â  Â  -moz-osx-font-smoothing: grayscale;
Â  Â  Â  Â  Â  Â  -webkit-tap-highlight-color: transparent;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {Â 
Â  Â  Â  Â  Â  Â  max-width: 800px;Â 
Â  Â  Â  Â  Â  Â  margin: 0 auto;Â 
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  padding-bottom: calc(120px + env(safe-area-inset-bottom));
Â  Â  Â  Â  }
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  font-size: clamp(1.5rem, 5vw, 2rem);
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: #0f172a;
Â  Â  Â  Â  Â  Â  margin-bottom: 0.5rem;
Â  Â  Â  Â  Â  Â  letter-spacing: -0.02em;
Â  Â  Â  Â  Â  Â  line-height: 1.2;
Â  Â  Â  Â  }
Â  Â  Â  Â  #loadingMsg {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  padding: 40px 20px;
Â  Â  Â  Â  Â  Â  color: #64748b;
Â  Â  Â  Â  }
Â  Â  Â  Â  .hidden {
Â  Â  Â  Â  Â  Â  display: none !important;
Â  Â  Â  Â  }
Â  Â  Â  Â  .visually-hidden {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  width: 1px;
Â  Â  Â  Â  Â  Â  height: 1px;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  margin: -1px;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  clip: rect(0, 0, 0, 0);
Â  Â  Â  Â  Â  Â  white-space: nowrap;
Â  Â  Â  Â  Â  Â  border: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  .spinner {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  width: 20px;
Â  Â  Â  Â  Â  Â  height: 20px;
Â  Â  Â  Â  Â  Â  border: 3px solid rgba(16, 185, 129, 0.3);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  border-top-color: #10b981;
Â  Â  Â  Â  Â  Â  animation: spin 0.8s ease-in-out infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes spin {
Â  Â  Â  Â  Â  Â  to { transform: rotate(360deg); }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
<div class="container">
Â  Â  <header>
Â  Â  Â  Â  <h1>ğŸ“… Book Your Slot</h1>
Â  Â  </header>

Â  Â  <main>
Â  Â  Â  Â  Â  Â  Â  Â  <section class="card lookup-section card-compact" aria-labelledby="lookup-heading">
Â  Â  Â  Â  Â  Â  <h2 id="lookup-heading" class="visually-hidden">Lookup and Cancel Bookings</h2>
Â  Â  Â  Â  Â  Â  <button id="lookupToggle"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn secondary-btn full-width-mobile"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-expanded="false"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-controls="lookupContent"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button">
Â  Â  Â  Â  Â  Â  Â  Â  ğŸ” Look Up / Cancel Booking
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <div id="lookupContent" class="hidden" aria-hidden="true">Â 
Â  Â  Â  Â  Â  Â  Â  Â  <p class="description" style="margin-top: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Enter your phone number to view and manage your bookings.
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="lookup-controls">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="lookupPhone" class="visually-hidden">Phone number for booking lookup</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â id="lookupPhone"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="form-input lookup-input"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â placeholder="Enter your phone number"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â maxlength="20"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â autocomplete="tel"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â inputmode="tel"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â aria-describedby="phone-hint">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="phone-hint" class="visually-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Enter your 10-digit phone number to search for bookings
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button id="lookupSearchBtn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn secondary-btn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-label="Search for bookings"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Search
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="userBookingsDisplay"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â style="margin-top: 15px;"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â role="region"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â aria-live="polite"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â aria-label="Your bookings">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="loadingMsg" role="status" aria-live="polite">
Â  Â  Â  Â  Â  Â  <span class="spinner" aria-hidden="true"></span>
Â  Â  Â  Â  Â  Â  <span>Loading available slots...</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="slotsDisplay" style="display:none;">
Â  Â  Â  Â  Â  Â  <p class="description">
Â  Â  Â  Â  Â  Â  Â  Â  Select one or more time slots. You can choose multiple slots across different dates.Â 
Â  Â  Â  Â  Â  Â  Â  Â  <strong>All times shown are in Eastern Time (ET)</strong>.
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <div id="datesContainer" role="region" aria-label="Available time slots"></div>
Â  Â  Â  Â  Â  Â  <div style="height: 100px;" aria-hidden="true"></div>Â 
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div id="floatingSignupBtnContainer" style="display:none;" role="region" aria-live="polite">
Â  Â  Â  Â  Â  Â  <button id="floatingSignupBtn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn primary-btn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-label="Continue to sign up with selected slots">
Â  Â  Â  Â  Â  Â  Â  Â  Continue to Sign Up (0 Slots Selected)
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <section id="signupSection" style="display:none;" class="card" aria-labelledby="signup-heading">
Â  Â  Â  Â  Â  Â  <h2 id="signup-heading">âœï¸ Enter Your Details</h2>
Â  Â  Â  Â  Â  Â  <div id="selectedSlotSummary"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â class="selected-slots-summary"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â role="region"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â aria-label="Selected slots summary">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <form id="signupForm" novalidate>
Â  Â  Â  Â  Â  Â  Â  Â  <label for="nameInput" class="visually-hidden">Your Full Name (Required)</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â id="nameInput"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="form-input"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â placeholder="Your Full Name *"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â maxlength="100"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â autocomplete="name"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â aria-required="true"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â aria-describedby="name-hint">
Â  Â  Â  Â  Â  Â  Â  Â  <span id="name-hint" class="visually-hidden">Enter your full name, at least 2 characters</span>

Â  Â  Â  Â  Â  Â  Â  Â  <label for="phoneInput" class="visually-hidden">Phone Number (Required)</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â id="phoneInput"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="form-input"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â placeholder="Phone Number *"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â maxlength="20"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â autocomplete="tel"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â inputmode="tel"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â aria-required="true"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â aria-describedby="phone-signup-hint">
Â  Â  Â  Â  Â  Â  Â  Â  <span id="phone-signup-hint" class="visually-hidden">Enter your 10-digit phone number</span>

Â  Â  Â  Â  Â  Â  Â  Â  <label for="emailInput" class="visually-hidden">Your Email Address (Optional)</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â id="emailInput"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â class="form-input"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â placeholder="Your Email Address (Optional)"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â maxlength="254"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â autocomplete="email"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â inputmode="email">

Â  Â  Â  Â  Â  Â  Â  Â  <label for="categorySelect" class="visually-hidden">Select Category (Required)</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select id="categorySelect"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="form-input"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  requiredÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-required="true">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled selected>-- Select Category * --</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Bal">Bal</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Balika">Balika</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kishore">Kishore</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Kishori">Kishori</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Yuvak">Yuvak</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Yuvati">Yuvati</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Premvati">Premvati</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Sanyukta">Sanyukta</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  <label for="notesInput" class="visually-hidden">Any special notes or comments (Optional)</label>
Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="notesInput"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="form-input"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Any special notes or comments (Optional)"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rows="3"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  maxlength="500"></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="signupMsg" class="msg-box" role="alert" aria-live="assertive"></div>

Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="submitSignupBtn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn primary-btn">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Submit Signup
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id="backToSlotsBtn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn secondary-btn">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â† Back to Slot Selection
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  Â  Â  Â  <section id="successMessage" style="display:none;" class="card" aria-labelledby="success-heading">
Â  Â  Â  Â  Â  Â  <h2 id="success-heading">ğŸ‰ Booking Confirmed!</h2>
Â  Â  Â  Â  Â  Â  <div id="confirmationDetails" role="status" aria-live="polite"></div>
Â  Â  Â  Â  Â  Â  <button id="resetPageBtn"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="btn primary-btn"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button">
Â  Â  Â  Â  Â  Â  Â  Â  Book Another Slot
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </section>
Â  Â  </main>
</div>

<script type="module">
Â  Â  window.addEventListener('error', (e) => {
Â  Â  Â  Â  if (e.filename && e.filename.endsWith('.js')) {
Â  Â  Â  Â  Â  Â  console.error('Failed to load module:', e.filename);
Â  Â  Â  Â  Â  Â  const loadingMsg = document.getElementById('loadingMsg');
Â  Â  Â  Â  Â  Â  if (loadingMsg) {
Â  Â  Â  Â  Â  Â  Â  Â  loadingMsg.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="msg-box error" role="alert" style="text-align: center; padding: 20px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  âš ï¸ Failed to load application. Please refresh the page.
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <br><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="location.reload()" class="btn secondary-btn" style="margin-top: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ğŸ”„ Refresh Page
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }, true);
</script>

Â  Â  <script type="module" src="config.js"></script>
<script type="module" src="utils.js"></script>
<script type="module" src="slots.js"></script>
<script type="module" src="lookup.js"></script>Â  <script type="module" src="signup-frontend.js"></script>


<script type="module">
Â  Â  import { loadSlots } from './slots.js';
Â  Â  import { getStateSnapshot } from './config.js';

Â  Â  // Wait for DOM to be ready
Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  console.log('ğŸš€ App initializing...');
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Expose debug helpers
Â  Â  Â  Â  window.__APP__ = {
Â  Â  Â  Â  Â  Â  loadSlots,
Â  Â  Â  Â  Â  Â  getState: getStateSnapshot
Â  Â  Â  Â  };
Â  Â  Â  Â  console.log('ğŸ’¡ Debug helpers available at window.__APP__');
Â  Â  Â  Â Â 
Â  Â  Â  Â  console.log('âœ… App initialized');
Â  Â  });
</script>

<noscript>
Â  Â  <div style="padding: 20px; text-align: center; background: #fee2e2; border: 2px solid #ef4444; margin: 20px; border-radius: 12px;">
Â  Â  Â  Â  <h2>âš ï¸ JavaScript Required</h2>
Â  Â  Â  Â  <p>This booking system requires JavaScript to function. Please enable JavaScript in your browser settings.</p>
Â  Â  </div>
</noscript>
</body>
</html>
